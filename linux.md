# linux 后台任务，运行，关闭，查看

fg、bg、jobs、&、nohup、ctrl+z、ctrl+c 命令

## &

加在一个命令的最后，可以把这个命令放到后台执行，如

    watch  -n 10 sh  test.sh  &  #每10s在后台执行一次test.sh脚本
## ctrl + z

可以将一个正在前台执行的命令放到后台，并且处于暂停状态。

## jobs

查看当前有多少在后台运行的命令

jobs -l选项可显示所有任务的PID，jobs的状态可以是running, stopped, Terminated。但是如果任务被终止了（kill），shell 从当前的shell环境已知的列表中删除任务的进程标识。

## fg

将后台中的命令调至前台继续运行。如果后台中有多个命令，可以用fg %jobnumber（是命令编号，不是进程号）将选中的命令调出。


## bg

将一个在后台暂停的命令，变成在后台继续执行。如果后台中有多个命令，可以用bg %jobnumber将选中的命令调出。

## kill

法子1：通过jobs命令查看job号（假设为num），然后执行kill %num
法子2：通过ps命令查看job的进程号（PID，假设为pid），然后执行kill pid
前台进程的终止：Ctrl+c

##  nohup

如果让程序始终在后台执行，即使关闭当前的终端也执行（之前的&做不到），这时候需要nohup。该命令可以在你退出帐户/关闭终端之后继续运行相应的进程。关闭中断后，在另一个终端jobs已经无法看到后台跑得程序了，此时利用ps（进程查看命令）

    ps -aux | grep "test.sh"  #a:显示所有程序 u:以用户为主的格式来显示 x:显示所有程序，不以终端机来区分

# linux 多个文件中查找字符串

    find <directory> -type f -name "*.c" | xargs grep "<strings>"

<directory>是你要找的文件夹；如果是当前文件夹可以省略

-type f 意思是只找文件

-name "*.c"  表示只找C语言写的代码，从而避免去查binary；也可以不写，表示找所有文件

<strings>是你要找的某个字符串


# fortune and fortune-zh

每日一首诗

    sudo apt-get install fortune(-zh)
    sudo apt-get purge fortune(-zh)


# vim 

## 批量缩进

    :3,33>

    3到33行缩进

## 直接粘贴的方式会导致代码丢失和缩进错乱等情况:

解决办法：
vim进入paste模式，命令如下：

    :set paste

进入paste模式之后，再按i进入插入模式，进行复制、粘贴就很正常了。 

命令模式下，输入

    :set nopaste

解除paste模式。

# sendmail 的安装与配置

https://blog.csdn.net/xin_yu_xin/article/details/45115723

https://blog.csdn.net/xin_yu_xin/article/details/45115723

# 后台任务和进程查看

我们可以让当前任务不再占用终端，去移动到后台了，去挂起或执行了，而仍然可以继续使用终端，继续来敲击命令。

# 先看进程ps –l

第一行的PID是进程id，那PPID则是父进程ID，第二列的S是status状态的意思。

## S，T,R

S：是指sleep睡眠状态，其实计算机的进程有很多时间都是在睡眠的，因为一般情况下，多任务执行是轮流分片执行的，大量的任务是不可能一起去执行的。因为硬件条件有限，一般的就是1个，两个，好些的是四个，8个cpu等等。那么几个根本不会同时执行多个任务

T：是挂起状态，挂起了就停止，在后台什么都不做，和睡眠状态不一样，挂起的话，即使时间片到了也不会被调度，就是什么都不做而干等着。只要不占据终端就能放到后台执行。

 注意：

 Vi编辑器是全屏幕的编辑器，一旦运行，就必须占用终端。

R：是运行状态（running）

其实还有一种状态Z，叫僵尸状态，使用ps –e（查看所有进程状态，而ps默认只看本终端的进程）

东西太多，我们使用管道命令，使用grep命令去查找带Z的行。

    dashuai@ubuntu:~$ ps -el | grep Z  

不过，人品不错，没有发现，其实一般情况下，一些程序员的程序写的不咋滴，就会出现一些僵尸进程出来，就是说一个程序本来已经结束了，但是他还占用着资源不释放！资源没有被回收。这样的进程就是僵尸进程。当然，比较常见的是STR这三个状态

补充：ps –f 完整的命令执行名称查看（full），可以显示完整的命令。

## 进一步看后台任务的例子 

比如sleep命令是睡眠命令，可以在后台运行，不会妨碍终端。

如果在命令后加一个符号&即可让命令在后台执行。

有一个专门查看后台任务的命令，jobs命令查看后台任务

    dashuai@ubuntu:~$ jobs  

发现每个后台任务都有编号（先后顺序编号），还有+和—，可以看作是优先级，+级别最高，什么都没有级别最低。这三个任务都已经完毕。
 

 fg把带+的任务调到前台来执行，我再重新弄几个后台任务

    dashuai@ubuntu:~$ jobs  
     [1]- Running                 sleep 1000&  
     [2]+ Running                 sleep 2000&  

Running是正在后台执行的意思。

fg（front）默认是把带+的任务调到前台，而fg加任务编号是将此任务调到前台来执行

bg（back）把暂停中的的后台任务，放到后台执行起来，同理默认是带+的任务带到后台执行！或者bg指定任务编号，来解除挂起状态。

终止某个当前的任务：一般可以用ctrl+c来终止。但是有些不行，比如vi就不能用ctrl+c来终止，当然也可以明确使用终止命令 kill 进程编号，通过发信号让进程终止

如果想要终止后台任务，也可以加上后台的编号，为了防止误会，加上%

kill %任务编号  终止后台某个正在执行的任务
